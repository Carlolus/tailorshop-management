<form [formGroup]="catalogForm" (ngSubmit)="onSubmit()" novalidate>

  <div class="form-group">
    <label for="description">Descripción</label>
    <input
      id="description"
      type="text"
      class="form-control"
      formControlName="description"
      [readonly]="isViewMode"
      placeholder="Descripción del catálogo"
    />
    <div *ngIf="catalogForm.get('description')?.touched && catalogForm.get('description')?.invalid" class="text-danger">
      <small *ngIf="catalogForm.get('description')?.errors?.['required']">La descripción es obligatoria.</small>
      <small *ngIf="catalogForm.get('description')?.errors?.['maxlength']">Máximo 500 caracteres permitidos.</small>
    </div>
  </div>

  <div class="form-group">
    <label for="image">URL de la Imagen</label>
    <input
      id="image"
      type="url"
      class="form-control"
      formControlName="image"
      [readonly]="isViewMode"
      placeholder="https://ejemplo.com/imagen.jpg"
    />
    <div *ngIf="catalogForm.get('image')?.touched && catalogForm.get('image')?.invalid" class="text-danger">
      <small *ngIf="catalogForm.get('image')?.errors?.['required']">La URL de la imagen es obligatoria.</small>
      <small *ngIf="catalogForm.get('image')?.errors?.['pattern']">Debe ser una URL válida de imagen (jpg, jpeg, png, gif).</small>
    </div>
  </div>

  <div class="form-group">
    <label for="fabric">Tela</label>
    <select
      id="fabric"
      class="form-control"
      formControlName="fabric"
      [disabled]="isViewMode"
    >
      <option value="" disabled>Seleccione una tela</option>
      <option *ngFor="let fabric of fabrics" [value]="fabric.fabric_id">
        {{ fabric.fabric_name }}
      </option>
    </select>
    <div *ngIf="catalogForm.get('fabric')?.touched && catalogForm.get('fabric')?.invalid" class="text-danger">
      Por favor, seleccione una tela.
    </div>
  </div>

  <div *ngIf="isLoadingFabrics" class="mt-2">
    Cargando telas...
  </div>

  <div class="form-group mt-3">
    <button type="submit" class="btn btn-primary" [disabled]="catalogForm.invalid || isViewMode">
      Guardar
    </button>
    <button type="button" class="btn btn-secondary ml-2" (click)="onClose()">
      Cancelar
    </button>
  </div>

</form>
